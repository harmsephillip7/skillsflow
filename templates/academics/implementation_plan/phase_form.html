{% extends 'base/app_layout.html' %}
{% load static %}

{% block title %}Edit Phase - {{ phase.name }} - SkillsFlow{% endblock %}

{% block page_title %}Edit Phase{% endblock %}

{% block breadcrumbs %}
<li class="flex items-center">
    <svg class="w-5 h-5 text-gray-400 mx-2" fill="currentColor" viewBox="0 0 20 20">
        <path fill-rule="evenodd" d="M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z" clip-rule="evenodd"/>
    </svg>
    <a href="{% url 'academics:implementation_plan_detail' phase.implementation_plan.pk %}" class="text-primary-600 hover:text-primary-800">{{ phase.implementation_plan.name }}</a>
</li>
<li class="flex items-center">
    <svg class="w-5 h-5 text-gray-400 mx-2" fill="currentColor" viewBox="0 0 20 20">
        <path fill-rule="evenodd" d="M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z" clip-rule="evenodd"/>
    </svg>
    <span class="text-gray-700 font-medium">Edit Phase</span>
</li>
{% endblock %}

{% block main_content %}
<div class="max-w-2xl mx-auto">
    <form method="post" class="space-y-6">
        {% csrf_token %}
        
        <div class="bg-white rounded-xl shadow-sm border border-gray-100 overflow-hidden">
            <div class="px-6 py-4 border-b border-gray-100 bg-gray-50">
                <h3 class="text-lg font-semibold text-gray-900">Phase Details</h3>
            </div>
            <div class="p-6 space-y-4">
                <div>
                    <label for="name" class="block text-sm font-medium text-gray-700 mb-1">Phase Name *</label>
                    <input type="text" name="name" id="name" required
                        value="{{ phase.name }}"
                        class="w-full px-4 py-2 border border-gray-300 rounded-lg shadow-sm focus:ring-primary-500 focus:border-primary-500">
                </div>
                
                <div>
                    <label for="phase_type" class="block text-sm font-medium text-gray-700 mb-1">Phase Type *</label>
                    <select name="phase_type" id="phase_type" required
                        class="w-full px-4 py-2 border border-gray-300 rounded-lg shadow-sm focus:ring-primary-500 focus:border-primary-500">
                        <option value="INDUCTION" {% if phase.phase_type == 'INDUCTION' %}selected{% endif %}>Induction</option>
                        <option value="INSTITUTIONAL" {% if phase.phase_type == 'INSTITUTIONAL' %}selected{% endif %}>Institutional</option>
                        <option value="WORKPLACE" {% if phase.phase_type == 'WORKPLACE' or phase.phase_type == 'WORKPLACE_STINT' %}selected{% endif %}>Workplace</option>
                        <option value="TRADE_TEST" {% if phase.phase_type == 'TRADE_TEST' %}selected{% endif %}>Trade Test</option>
                        <option value="ASSESSMENT" {% if phase.phase_type == 'ASSESSMENT' %}selected{% endif %}>Assessment</option>
                    </select>
                </div>
                
                <div class="grid grid-cols-2 gap-4">
                    <div>
                        <label for="duration_weeks" class="block text-sm font-medium text-gray-700 mb-1">Duration (Weeks) *</label>
                        <input type="number" name="duration_weeks" id="duration_weeks" required min="1"
                            value="{{ phase.duration_weeks }}"
                            class="w-full px-4 py-2 border border-gray-300 rounded-lg shadow-sm focus:ring-primary-500 focus:border-primary-500">
                    </div>
                    
                    <div>
                        <label for="year_level" class="block text-sm font-medium text-gray-700 mb-1">Year Level</label>
                        <select name="year_level" id="year_level"
                            class="w-full px-4 py-2 border border-gray-300 rounded-lg shadow-sm focus:ring-primary-500 focus:border-primary-500">
                            <option value="">Not specified</option>
                            <option value="1" {% if phase.year_level == 1 %}selected{% endif %}>Year 1</option>
                            <option value="2" {% if phase.year_level == 2 %}selected{% endif %}>Year 2</option>
                            <option value="3" {% if phase.year_level == 3 %}selected{% endif %}>Year 3</option>
                        </select>
                    </div>
                </div>
                
                <div>
                    <label for="sequence" class="block text-sm font-medium text-gray-700 mb-1">Sequence Order</label>
                    <input type="number" name="sequence" id="sequence" min="1"
                        value="{{ phase.sequence }}"
                        class="w-full px-4 py-2 border border-gray-300 rounded-lg shadow-sm focus:ring-primary-500 focus:border-primary-500">
                    <p class="text-xs text-gray-500 mt-1">Position in the implementation plan timeline</p>
                </div>
            </div>
        </div>
        
        <div class="flex items-center justify-between">
            <a href="{% url 'academics:implementation_plan_detail' phase.implementation_plan.pk %}" class="text-gray-600 hover:text-gray-800 font-medium">
                ‚Üê Back to Implementation Plan
            </a>
            <button type="submit" class="px-6 py-2 text-sm font-medium text-white bg-primary-600 hover:bg-primary-700 rounded-lg shadow-sm">
                Update Phase
            </button>
        </div>
    </form>
</div>
{% endblock %}
