# Generated by Django 5.2.8 on 2025-11-27 20:27

import django.db.models.deletion
from decimal import Decimal
from django.conf import settings
from django.db import migrations, models


class Migration(migrations.Migration):

    initial = True

    dependencies = [
        ('academics', '0002_initial'),
        ('crm', '0001_initial'),
        ('learners', '0001_initial'),
        ('tenants', '0001_initial'),
        migrations.swappable_dependency(settings.AUTH_USER_MODEL),
    ]

    operations = [
        migrations.CreateModel(
            name='ATRSubmission',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('is_deleted', models.BooleanField(default=False)),
                ('deleted_at', models.DateTimeField(blank=True, null=True)),
                ('status', models.CharField(choices=[('DRAFT', 'Draft'), ('IN_PROGRESS', 'In Progress'), ('REVIEW', 'Internal Review'), ('SUBMITTED', 'Submitted to SETA'), ('ACCEPTED', 'Accepted'), ('REJECTED', 'Rejected')], default='DRAFT', max_length=20)),
                ('seta_reference', models.CharField(blank=True, max_length=50)),
                ('submitted_date', models.DateField(blank=True, null=True)),
                ('accepted_date', models.DateField(blank=True, null=True)),
                ('total_actual_spend', models.DecimalField(decimal_places=2, default=Decimal('0.00'), max_digits=12)),
                ('total_learners_trained', models.PositiveIntegerField(default=0)),
                ('notes', models.TextField(blank=True)),
                ('campus', models.ForeignKey(on_delete=django.db.models.deletion.PROTECT, related_name='%(class)s_items', to='tenants.campus')),
                ('created_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.PROTECT, related_name='%(class)s_created', to=settings.AUTH_USER_MODEL)),
                ('deleted_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='%(class)s_deleted', to=settings.AUTH_USER_MODEL)),
                ('updated_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.PROTECT, related_name='%(class)s_updated', to=settings.AUTH_USER_MODEL)),
            ],
            options={
                'verbose_name': 'ATR Submission',
                'verbose_name_plural': 'ATR Submissions',
                'ordering': ['-reporting_year__year'],
            },
        ),
        migrations.CreateModel(
            name='ATRCompletedTraining',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('intervention_type', models.CharField(choices=[('LEARNERSHIP', 'Learnership'), ('SKILLS_PROG', 'Skills Programme'), ('INTERNSHIP', 'Internship'), ('BURSARY', 'Bursary'), ('SHORT_COURSE', 'Short Course'), ('ARTISAN', 'Artisan Development'), ('OTHER', 'Other')], max_length=20)),
                ('training_description', models.CharField(max_length=200)),
                ('african_male', models.PositiveIntegerField(default=0)),
                ('african_female', models.PositiveIntegerField(default=0)),
                ('coloured_male', models.PositiveIntegerField(default=0)),
                ('coloured_female', models.PositiveIntegerField(default=0)),
                ('indian_male', models.PositiveIntegerField(default=0)),
                ('indian_female', models.PositiveIntegerField(default=0)),
                ('white_male', models.PositiveIntegerField(default=0)),
                ('white_female', models.PositiveIntegerField(default=0)),
                ('disabled_male', models.PositiveIntegerField(default=0)),
                ('disabled_female', models.PositiveIntegerField(default=0)),
                ('actual_cost', models.DecimalField(decimal_places=2, default=Decimal('0.00'), max_digits=12)),
                ('qualification', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='atr_completed', to='academics.qualification')),
                ('atr', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='completed_training', to='corporate.atrsubmission')),
            ],
            options={
                'verbose_name': 'ATR Completed Training',
                'verbose_name_plural': 'ATR Completed Training',
                'ordering': ['intervention_type'],
            },
        ),
        migrations.CreateModel(
            name='Committee',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('is_deleted', models.BooleanField(default=False)),
                ('deleted_at', models.DateTimeField(blank=True, null=True)),
                ('committee_type', models.CharField(choices=[('TRAINING', 'Training Committee'), ('EE', 'Employment Equity Committee'), ('WSP', 'WSP Committee'), ('SAFETY', 'Health & Safety Committee')], max_length=20)),
                ('name', models.CharField(max_length=100)),
                ('meeting_frequency', models.CharField(blank=True, max_length=50)),
                ('is_active', models.BooleanField(default=True)),
                ('campus', models.ForeignKey(on_delete=django.db.models.deletion.PROTECT, related_name='%(class)s_items', to='tenants.campus')),
                ('created_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.PROTECT, related_name='%(class)s_created', to=settings.AUTH_USER_MODEL)),
                ('deleted_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='%(class)s_deleted', to=settings.AUTH_USER_MODEL)),
                ('updated_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.PROTECT, related_name='%(class)s_updated', to=settings.AUTH_USER_MODEL)),
            ],
            options={
                'verbose_name': 'Committee',
                'verbose_name_plural': 'Committees',
                'ordering': ['committee_type', 'name'],
            },
        ),
        migrations.CreateModel(
            name='CommitteeMember',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('name', models.CharField(blank=True, max_length=100)),
                ('designation', models.CharField(blank=True, max_length=100)),
                ('role', models.CharField(choices=[('CHAIR', 'Chairperson'), ('VICE_CHAIR', 'Vice Chairperson'), ('SECRETARY', 'Secretary'), ('MEMBER', 'Member')], default='MEMBER', max_length=20)),
                ('start_date', models.DateField()),
                ('end_date', models.DateField(blank=True, null=True)),
                ('is_active', models.BooleanField(default=True)),
                ('committee', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='members', to='corporate.committee')),
            ],
            options={
                'verbose_name': 'Committee Member',
                'verbose_name_plural': 'Committee Members',
                'ordering': ['role', 'name'],
            },
        ),
        migrations.CreateModel(
            name='CommitteeMeeting',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('is_deleted', models.BooleanField(default=False)),
                ('deleted_at', models.DateTimeField(blank=True, null=True)),
                ('meeting_date', models.DateField()),
                ('meeting_time', models.TimeField(blank=True, null=True)),
                ('venue', models.CharField(blank=True, max_length=200)),
                ('agenda', models.TextField(blank=True)),
                ('minutes', models.TextField(blank=True)),
                ('minutes_file', models.FileField(blank=True, upload_to='committee_minutes/')),
                ('next_meeting_date', models.DateField(blank=True, null=True)),
                ('committee', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='meetings', to='corporate.committee')),
                ('created_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.PROTECT, related_name='%(class)s_created', to=settings.AUTH_USER_MODEL)),
                ('deleted_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='%(class)s_deleted', to=settings.AUTH_USER_MODEL)),
                ('updated_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.PROTECT, related_name='%(class)s_updated', to=settings.AUTH_USER_MODEL)),
                ('attendees', models.ManyToManyField(blank=True, related_name='meetings_attended', to='corporate.committeemember')),
            ],
            options={
                'verbose_name': 'Committee Meeting',
                'verbose_name_plural': 'Committee Meetings',
                'ordering': ['-meeting_date'],
            },
        ),
        migrations.CreateModel(
            name='CorporateClient',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('is_deleted', models.BooleanField(default=False)),
                ('deleted_at', models.DateTimeField(blank=True, null=True)),
                ('company_name', models.CharField(max_length=200)),
                ('trading_name', models.CharField(blank=True, max_length=200)),
                ('registration_number', models.CharField(blank=True, max_length=20)),
                ('vat_number', models.CharField(blank=True, max_length=20)),
                ('phone', models.CharField(max_length=20)),
                ('email', models.EmailField(max_length=254)),
                ('website', models.URLField(blank=True)),
                ('physical_address', models.TextField()),
                ('postal_address', models.TextField(blank=True)),
                ('sic_code', models.CharField(blank=True, max_length=10)),
                ('industry', models.CharField(blank=True, max_length=100)),
                ('seta_number', models.CharField(blank=True, max_length=50)),
                ('employee_count', models.PositiveIntegerField(blank=True, null=True)),
                ('annual_revenue', models.DecimalField(blank=True, decimal_places=2, max_digits=14, null=True)),
                ('status', models.CharField(choices=[('PROSPECT', 'Prospect'), ('ACTIVE', 'Active'), ('ON_HOLD', 'On Hold'), ('INACTIVE', 'Inactive')], default='PROSPECT', max_length=20)),
                ('contract_start_date', models.DateField(blank=True, null=True)),
                ('contract_end_date', models.DateField(blank=True, null=True)),
                ('notes', models.TextField(blank=True)),
                ('account_manager', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='managed_clients', to=settings.AUTH_USER_MODEL)),
                ('campus', models.ForeignKey(on_delete=django.db.models.deletion.PROTECT, related_name='%(class)s_items', to='tenants.campus')),
                ('created_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.PROTECT, related_name='%(class)s_created', to=settings.AUTH_USER_MODEL)),
                ('deleted_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='%(class)s_deleted', to=settings.AUTH_USER_MODEL)),
                ('seta', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='corporate_clients', to='learners.seta')),
                ('updated_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.PROTECT, related_name='%(class)s_updated', to=settings.AUTH_USER_MODEL)),
            ],
            options={
                'verbose_name': 'Corporate Client',
                'verbose_name_plural': 'Corporate Clients',
                'ordering': ['company_name'],
            },
        ),
        migrations.AddField(
            model_name='committee',
            name='client',
            field=models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='committees', to='corporate.corporateclient'),
        ),
        migrations.CreateModel(
            name='ClientProject',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('is_deleted', models.BooleanField(default=False)),
                ('deleted_at', models.DateTimeField(blank=True, null=True)),
                ('name', models.CharField(max_length=200)),
                ('description', models.TextField(blank=True)),
                ('start_date', models.DateField()),
                ('end_date', models.DateField(blank=True, null=True)),
                ('status', models.CharField(choices=[('PLANNING', 'Planning'), ('ACTIVE', 'Active'), ('ON_HOLD', 'On Hold'), ('COMPLETED', 'Completed'), ('CANCELLED', 'Cancelled')], default='PLANNING', max_length=20)),
                ('budget', models.DecimalField(blank=True, decimal_places=2, max_digits=12, null=True)),
                ('notes', models.TextField(blank=True)),
                ('campus', models.ForeignKey(on_delete=django.db.models.deletion.PROTECT, related_name='%(class)s_items', to='tenants.campus')),
                ('created_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.PROTECT, related_name='%(class)s_created', to=settings.AUTH_USER_MODEL)),
                ('deleted_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='%(class)s_deleted', to=settings.AUTH_USER_MODEL)),
                ('project_manager', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='client_projects', to=settings.AUTH_USER_MODEL)),
                ('updated_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.PROTECT, related_name='%(class)s_updated', to=settings.AUTH_USER_MODEL)),
                ('client', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='projects', to='corporate.corporateclient')),
            ],
            options={
                'verbose_name': 'Client Project',
                'verbose_name_plural': 'Client Projects',
                'ordering': ['-start_date'],
            },
        ),
        migrations.CreateModel(
            name='BBBEEScorecard',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('is_deleted', models.BooleanField(default=False)),
                ('deleted_at', models.DateTimeField(blank=True, null=True)),
                ('verification_date', models.DateField()),
                ('expiry_date', models.DateField()),
                ('verification_agency', models.CharField(max_length=200)),
                ('certificate_number', models.CharField(blank=True, max_length=50)),
                ('bbbee_level', models.PositiveIntegerField(choices=[(1, 'Level 1'), (2, 'Level 2'), (3, 'Level 3'), (4, 'Level 4'), (5, 'Level 5'), (6, 'Level 6'), (7, 'Level 7'), (8, 'Level 8'), (0, 'Non-Compliant')])),
                ('ownership_score', models.DecimalField(decimal_places=2, default=Decimal('0.00'), max_digits=5)),
                ('management_control_score', models.DecimalField(decimal_places=2, default=Decimal('0.00'), max_digits=5)),
                ('skills_development_score', models.DecimalField(decimal_places=2, default=Decimal('0.00'), max_digits=5)),
                ('enterprise_supplier_dev_score', models.DecimalField(decimal_places=2, default=Decimal('0.00'), max_digits=5)),
                ('socio_economic_dev_score', models.DecimalField(decimal_places=2, default=Decimal('0.00'), max_digits=5)),
                ('total_score', models.DecimalField(decimal_places=2, default=Decimal('0.00'), max_digits=6)),
                ('certificate', models.FileField(blank=True, upload_to='bbbee_certificates/')),
                ('notes', models.TextField(blank=True)),
                ('campus', models.ForeignKey(on_delete=django.db.models.deletion.PROTECT, related_name='%(class)s_items', to='tenants.campus')),
                ('created_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.PROTECT, related_name='%(class)s_created', to=settings.AUTH_USER_MODEL)),
                ('deleted_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='%(class)s_deleted', to=settings.AUTH_USER_MODEL)),
                ('updated_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.PROTECT, related_name='%(class)s_updated', to=settings.AUTH_USER_MODEL)),
                ('client', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='bbbee_scorecards', to='corporate.corporateclient')),
            ],
            options={
                'verbose_name': 'BBBEE Scorecard',
                'verbose_name_plural': 'BBBEE Scorecards',
                'ordering': ['-verification_date'],
            },
        ),
        migrations.AddField(
            model_name='atrsubmission',
            name='client',
            field=models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='atr_submissions', to='corporate.corporateclient'),
        ),
        migrations.CreateModel(
            name='CorporateContact',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('is_deleted', models.BooleanField(default=False)),
                ('deleted_at', models.DateTimeField(blank=True, null=True)),
                ('first_name', models.CharField(max_length=50)),
                ('last_name', models.CharField(max_length=50)),
                ('job_title', models.CharField(blank=True, max_length=100)),
                ('role', models.CharField(choices=[('HR_MANAGER', 'HR Manager'), ('TRAINING_MANAGER', 'Training Manager'), ('SDF', 'Skills Development Facilitator'), ('FINANCE', 'Finance Contact'), ('EXEC', 'Executive'), ('OTHER', 'Other')], max_length=20)),
                ('email', models.EmailField(max_length=254)),
                ('phone', models.CharField(max_length=20)),
                ('mobile', models.CharField(blank=True, max_length=20)),
                ('is_primary', models.BooleanField(default=False)),
                ('is_active', models.BooleanField(default=True)),
                ('client', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='contacts', to='corporate.corporateclient')),
                ('created_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.PROTECT, related_name='%(class)s_created', to=settings.AUTH_USER_MODEL)),
                ('deleted_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='%(class)s_deleted', to=settings.AUTH_USER_MODEL)),
                ('updated_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.PROTECT, related_name='%(class)s_updated', to=settings.AUTH_USER_MODEL)),
            ],
            options={
                'verbose_name': 'Corporate Contact',
                'verbose_name_plural': 'Corporate Contacts',
                'ordering': ['-is_primary', 'last_name'],
            },
        ),
        migrations.AddField(
            model_name='committeemember',
            name='contact',
            field=models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='committee_memberships', to='corporate.corporatecontact'),
        ),
        migrations.CreateModel(
            name='CorporateEmployee',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('is_deleted', models.BooleanField(default=False)),
                ('deleted_at', models.DateTimeField(blank=True, null=True)),
                ('employee_number', models.CharField(blank=True, max_length=50)),
                ('department', models.CharField(blank=True, max_length=100)),
                ('job_title', models.CharField(blank=True, max_length=100)),
                ('start_date', models.DateField()),
                ('end_date', models.DateField(blank=True, null=True)),
                ('is_current', models.BooleanField(default=True)),
                ('client', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='employees', to='corporate.corporateclient')),
                ('created_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.PROTECT, related_name='%(class)s_created', to=settings.AUTH_USER_MODEL)),
                ('deleted_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='%(class)s_deleted', to=settings.AUTH_USER_MODEL)),
                ('learner', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='corporate_links', to='learners.learner')),
                ('updated_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.PROTECT, related_name='%(class)s_updated', to=settings.AUTH_USER_MODEL)),
            ],
            options={
                'verbose_name': 'Corporate Employee',
                'verbose_name_plural': 'Corporate Employees',
                'ordering': ['-start_date'],
            },
        ),
        migrations.CreateModel(
            name='DeadlineReminder',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('is_deleted', models.BooleanField(default=False)),
                ('deleted_at', models.DateTimeField(blank=True, null=True)),
                ('reminder_type', models.CharField(choices=[('WSP', 'WSP Deadline'), ('ATR', 'ATR Deadline'), ('EE', 'EE Report Deadline'), ('BBBEE', 'BBBEE Expiry'), ('GRANT', 'Grant Deadline'), ('CLAIM', 'Claim Deadline'), ('CONTRACT', 'Contract Renewal'), ('CUSTOM', 'Custom Reminder')], max_length=20)),
                ('title', models.CharField(max_length=200)),
                ('description', models.TextField(blank=True)),
                ('deadline_date', models.DateField()),
                ('reminder_days_before', models.JSONField(default=list, help_text='Days before deadline to send reminders, e.g. [30, 14, 7, 1]')),
                ('is_completed', models.BooleanField(default=False)),
                ('completed_date', models.DateField(blank=True, null=True)),
                ('client', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='deadline_reminders', to='corporate.corporateclient')),
                ('created_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.PROTECT, related_name='%(class)s_created', to=settings.AUTH_USER_MODEL)),
                ('deleted_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='%(class)s_deleted', to=settings.AUTH_USER_MODEL)),
                ('notify_users', models.ManyToManyField(blank=True, related_name='deadline_reminders', to=settings.AUTH_USER_MODEL)),
                ('updated_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.PROTECT, related_name='%(class)s_updated', to=settings.AUTH_USER_MODEL)),
            ],
            options={
                'verbose_name': 'Deadline Reminder',
                'verbose_name_plural': 'Deadline Reminders',
                'ordering': ['deadline_date'],
            },
        ),
        migrations.CreateModel(
            name='EEReport',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('is_deleted', models.BooleanField(default=False)),
                ('deleted_at', models.DateTimeField(blank=True, null=True)),
                ('reporting_period_start', models.DateField()),
                ('reporting_period_end', models.DateField()),
                ('status', models.CharField(choices=[('DRAFT', 'Draft'), ('IN_PROGRESS', 'In Progress'), ('REVIEW', 'Internal Review'), ('SUBMITTED', 'Submitted'), ('ACCEPTED', 'Accepted')], default='DRAFT', max_length=20)),
                ('submitted_date', models.DateField(blank=True, null=True)),
                ('reference_number', models.CharField(blank=True, max_length=50)),
                ('notes', models.TextField(blank=True)),
                ('campus', models.ForeignKey(on_delete=django.db.models.deletion.PROTECT, related_name='%(class)s_items', to='tenants.campus')),
                ('client', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='ee_reports', to='corporate.corporateclient')),
                ('created_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.PROTECT, related_name='%(class)s_created', to=settings.AUTH_USER_MODEL)),
                ('deleted_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='%(class)s_deleted', to=settings.AUTH_USER_MODEL)),
                ('updated_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.PROTECT, related_name='%(class)s_updated', to=settings.AUTH_USER_MODEL)),
            ],
            options={
                'verbose_name': 'EE Report',
                'verbose_name_plural': 'EE Reports',
                'ordering': ['-reporting_period_end'],
            },
        ),
        migrations.CreateModel(
            name='EmployeeIDP',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('is_deleted', models.BooleanField(default=False)),
                ('deleted_at', models.DateTimeField(blank=True, null=True)),
                ('period_start', models.DateField()),
                ('period_end', models.DateField()),
                ('status', models.CharField(choices=[('DRAFT', 'Draft'), ('APPROVED', 'Approved'), ('IN_PROGRESS', 'In Progress'), ('COMPLETED', 'Completed'), ('CANCELLED', 'Cancelled')], default='DRAFT', max_length=20)),
                ('career_goals', models.TextField(blank=True)),
                ('development_areas', models.TextField(blank=True)),
                ('employee_sign_off_date', models.DateField(blank=True, null=True)),
                ('manager_sign_off_date', models.DateField(blank=True, null=True)),
                ('notes', models.TextField(blank=True)),
                ('campus', models.ForeignKey(on_delete=django.db.models.deletion.PROTECT, related_name='%(class)s_items', to='tenants.campus')),
                ('created_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.PROTECT, related_name='%(class)s_created', to=settings.AUTH_USER_MODEL)),
                ('deleted_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='%(class)s_deleted', to=settings.AUTH_USER_MODEL)),
                ('employee', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='idps', to='corporate.corporateemployee')),
                ('manager', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='managed_idps', to='corporate.corporatecontact')),
                ('updated_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.PROTECT, related_name='%(class)s_updated', to=settings.AUTH_USER_MODEL)),
            ],
            options={
                'verbose_name': 'Employee IDP',
                'verbose_name_plural': 'Employee IDPs',
                'ordering': ['-period_start'],
            },
        ),
        migrations.CreateModel(
            name='GrantProject',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('is_deleted', models.BooleanField(default=False)),
                ('deleted_at', models.DateTimeField(blank=True, null=True)),
                ('project_name', models.CharField(max_length=200)),
                ('project_number', models.CharField(blank=True, max_length=50)),
                ('status', models.CharField(choices=[('APPLIED', 'Application Submitted'), ('APPROVED', 'Approved'), ('CONTRACTED', 'Contracted'), ('ACTIVE', 'Active/In Progress'), ('REPORTING', 'Reporting Phase'), ('COMPLETED', 'Completed'), ('CLOSED', 'Closed')], default='APPLIED', max_length=20)),
                ('application_date', models.DateField(blank=True, null=True)),
                ('approval_date', models.DateField(blank=True, null=True)),
                ('start_date', models.DateField(blank=True, null=True)),
                ('end_date', models.DateField(blank=True, null=True)),
                ('approved_amount', models.DecimalField(blank=True, decimal_places=2, max_digits=12, null=True)),
                ('claimed_amount', models.DecimalField(decimal_places=2, default=Decimal('0.00'), max_digits=12)),
                ('received_amount', models.DecimalField(decimal_places=2, default=Decimal('0.00'), max_digits=12)),
                ('target_learners', models.PositiveIntegerField(blank=True, null=True)),
                ('enrolled_learners', models.PositiveIntegerField(default=0)),
                ('completed_learners', models.PositiveIntegerField(default=0)),
                ('notes', models.TextField(blank=True)),
                ('campus', models.ForeignKey(on_delete=django.db.models.deletion.PROTECT, related_name='%(class)s_items', to='tenants.campus')),
                ('client', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='grant_projects', to='corporate.corporateclient')),
                ('created_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.PROTECT, related_name='%(class)s_created', to=settings.AUTH_USER_MODEL)),
                ('deleted_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='%(class)s_deleted', to=settings.AUTH_USER_MODEL)),
                ('funding_opportunity', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='grant_projects', to='crm.setafundingopportunity')),
                ('project_manager', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='managed_grants', to=settings.AUTH_USER_MODEL)),
                ('seta', models.ForeignKey(on_delete=django.db.models.deletion.PROTECT, related_name='grant_projects', to='learners.seta')),
                ('updated_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.PROTECT, related_name='%(class)s_updated', to=settings.AUTH_USER_MODEL)),
            ],
            options={
                'verbose_name': 'Grant Project',
                'verbose_name_plural': 'Grant Projects',
                'ordering': ['-start_date'],
            },
        ),
        migrations.CreateModel(
            name='GrantClaim',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('is_deleted', models.BooleanField(default=False)),
                ('deleted_at', models.DateTimeField(blank=True, null=True)),
                ('claim_type', models.CharField(choices=[('TRANCHE_1', 'Tranche 1 - Commencement'), ('TRANCHE_2', 'Tranche 2 - Midpoint'), ('TRANCHE_3', 'Tranche 3 - Completion'), ('FINAL', 'Final Claim'), ('INTERIM', 'Interim Claim')], max_length=20)),
                ('claim_number', models.CharField(max_length=50)),
                ('submission_date', models.DateField(blank=True, null=True)),
                ('status', models.CharField(choices=[('DRAFT', 'Draft'), ('SUBMITTED', 'Submitted'), ('UNDER_REVIEW', 'Under Review'), ('QUERY', 'Query/Rework Required'), ('APPROVED', 'Approved'), ('PAID', 'Paid'), ('REJECTED', 'Rejected')], default='DRAFT', max_length=20)),
                ('claim_amount', models.DecimalField(decimal_places=2, max_digits=12)),
                ('approved_amount', models.DecimalField(blank=True, decimal_places=2, max_digits=12, null=True)),
                ('learners_commenced', models.PositiveIntegerField(default=0)),
                ('learners_completed', models.PositiveIntegerField(default=0)),
                ('payment_date', models.DateField(blank=True, null=True)),
                ('payment_reference', models.CharField(blank=True, max_length=50)),
                ('notes', models.TextField(blank=True)),
                ('created_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.PROTECT, related_name='%(class)s_created', to=settings.AUTH_USER_MODEL)),
                ('deleted_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='%(class)s_deleted', to=settings.AUTH_USER_MODEL)),
                ('updated_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.PROTECT, related_name='%(class)s_updated', to=settings.AUTH_USER_MODEL)),
                ('project', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='claims', to='corporate.grantproject')),
            ],
            options={
                'verbose_name': 'Grant Claim',
                'verbose_name_plural': 'Grant Claims',
                'ordering': ['-submission_date'],
            },
        ),
        migrations.CreateModel(
            name='IDPTrainingNeed',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('title', models.CharField(max_length=200)),
                ('description', models.TextField(blank=True)),
                ('priority', models.CharField(choices=[('HIGH', 'High'), ('MEDIUM', 'Medium'), ('LOW', 'Low')], default='MEDIUM', max_length=10)),
                ('status', models.CharField(choices=[('IDENTIFIED', 'Identified'), ('PLANNED', 'Planned'), ('IN_PROGRESS', 'In Progress'), ('COMPLETED', 'Completed'), ('DEFERRED', 'Deferred')], default='IDENTIFIED', max_length=20)),
                ('target_date', models.DateField(blank=True, null=True)),
                ('estimated_cost', models.DecimalField(blank=True, decimal_places=2, max_digits=10, null=True)),
                ('completed_date', models.DateField(blank=True, null=True)),
                ('enrollment', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='idp_needs', to='academics.enrollment')),
                ('idp', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='training_needs', to='corporate.employeeidp')),
                ('qualification', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='idp_needs', to='academics.qualification')),
            ],
            options={
                'verbose_name': 'IDP Training Need',
                'verbose_name_plural': 'IDP Training Needs',
                'ordering': ['priority', 'target_date'],
            },
        ),
        migrations.CreateModel(
            name='ProjectTask',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('is_deleted', models.BooleanField(default=False)),
                ('deleted_at', models.DateTimeField(blank=True, null=True)),
                ('title', models.CharField(max_length=200)),
                ('description', models.TextField(blank=True)),
                ('status', models.CharField(choices=[('TODO', 'To Do'), ('IN_PROGRESS', 'In Progress'), ('BLOCKED', 'Blocked'), ('DONE', 'Done')], default='TODO', max_length=20)),
                ('due_date', models.DateField(blank=True, null=True)),
                ('completed_date', models.DateField(blank=True, null=True)),
                ('assigned_to', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='assigned_tasks', to=settings.AUTH_USER_MODEL)),
                ('created_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.PROTECT, related_name='%(class)s_created', to=settings.AUTH_USER_MODEL)),
                ('deleted_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='%(class)s_deleted', to=settings.AUTH_USER_MODEL)),
                ('project', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='tasks', to='corporate.clientproject')),
                ('updated_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.PROTECT, related_name='%(class)s_updated', to=settings.AUTH_USER_MODEL)),
            ],
            options={
                'verbose_name': 'Project Task',
                'verbose_name_plural': 'Project Tasks',
                'ordering': ['status', 'due_date'],
            },
        ),
        migrations.CreateModel(
            name='WSPSubmission',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('is_deleted', models.BooleanField(default=False)),
                ('deleted_at', models.DateTimeField(blank=True, null=True)),
                ('status', models.CharField(choices=[('DRAFT', 'Draft'), ('IN_PROGRESS', 'In Progress'), ('REVIEW', 'Internal Review'), ('SUBMITTED', 'Submitted to SETA'), ('ACCEPTED', 'Accepted'), ('REJECTED', 'Rejected')], default='DRAFT', max_length=20)),
                ('seta_reference', models.CharField(blank=True, max_length=50)),
                ('submitted_date', models.DateField(blank=True, null=True)),
                ('accepted_date', models.DateField(blank=True, null=True)),
                ('total_planned_training_spend', models.DecimalField(decimal_places=2, default=Decimal('0.00'), max_digits=12)),
                ('total_learners_planned', models.PositiveIntegerField(default=0)),
                ('notes', models.TextField(blank=True)),
                ('campus', models.ForeignKey(on_delete=django.db.models.deletion.PROTECT, related_name='%(class)s_items', to='tenants.campus')),
                ('client', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='wsp_submissions', to='corporate.corporateclient')),
                ('created_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.PROTECT, related_name='%(class)s_created', to=settings.AUTH_USER_MODEL)),
                ('deleted_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='%(class)s_deleted', to=settings.AUTH_USER_MODEL)),
                ('updated_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.PROTECT, related_name='%(class)s_updated', to=settings.AUTH_USER_MODEL)),
            ],
            options={
                'verbose_name': 'WSP Submission',
                'verbose_name_plural': 'WSP Submissions',
                'ordering': ['-wsp_year__year'],
            },
        ),
        migrations.CreateModel(
            name='WSPPlannedTraining',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('intervention_type', models.CharField(choices=[('LEARNERSHIP', 'Learnership'), ('SKILLS_PROG', 'Skills Programme'), ('INTERNSHIP', 'Internship'), ('BURSARY', 'Bursary'), ('SHORT_COURSE', 'Short Course'), ('ARTISAN', 'Artisan Development'), ('OTHER', 'Other')], max_length=20)),
                ('training_description', models.CharField(max_length=200)),
                ('african_male', models.PositiveIntegerField(default=0)),
                ('african_female', models.PositiveIntegerField(default=0)),
                ('coloured_male', models.PositiveIntegerField(default=0)),
                ('coloured_female', models.PositiveIntegerField(default=0)),
                ('indian_male', models.PositiveIntegerField(default=0)),
                ('indian_female', models.PositiveIntegerField(default=0)),
                ('white_male', models.PositiveIntegerField(default=0)),
                ('white_female', models.PositiveIntegerField(default=0)),
                ('disabled_male', models.PositiveIntegerField(default=0)),
                ('disabled_female', models.PositiveIntegerField(default=0)),
                ('estimated_cost', models.DecimalField(decimal_places=2, default=Decimal('0.00'), max_digits=12)),
                ('qualification', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='wsp_planned', to='academics.qualification')),
                ('wsp', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='planned_training', to='corporate.wspsubmission')),
            ],
            options={
                'verbose_name': 'WSP Planned Training',
                'verbose_name_plural': 'WSP Planned Training',
                'ordering': ['intervention_type'],
            },
        ),
        migrations.AddField(
            model_name='atrsubmission',
            name='wsp',
            field=models.OneToOneField(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='atr', to='corporate.wspsubmission'),
        ),
        migrations.CreateModel(
            name='WSPYear',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('is_deleted', models.BooleanField(default=False)),
                ('deleted_at', models.DateTimeField(blank=True, null=True)),
                ('year', models.PositiveIntegerField(unique=True)),
                ('submission_deadline', models.DateField()),
                ('is_current', models.BooleanField(default=False)),
                ('created_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.PROTECT, related_name='%(class)s_created', to=settings.AUTH_USER_MODEL)),
                ('deleted_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='%(class)s_deleted', to=settings.AUTH_USER_MODEL)),
                ('updated_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.PROTECT, related_name='%(class)s_updated', to=settings.AUTH_USER_MODEL)),
            ],
            options={
                'verbose_name': 'WSP Year',
                'verbose_name_plural': 'WSP Years',
                'ordering': ['-year'],
            },
        ),
        migrations.AddField(
            model_name='wspsubmission',
            name='wsp_year',
            field=models.ForeignKey(on_delete=django.db.models.deletion.PROTECT, related_name='submissions', to='corporate.wspyear'),
        ),
        migrations.AddField(
            model_name='atrsubmission',
            name='reporting_year',
            field=models.ForeignKey(on_delete=django.db.models.deletion.PROTECT, related_name='atr_submissions', to='corporate.wspyear'),
        ),
        migrations.CreateModel(
            name='EEWorkforceProfile',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('occupational_level', models.CharField(choices=[('TOP_MGMT', 'Top Management'), ('SENIOR_MGMT', 'Senior Management'), ('PROF_QUALIFIED', 'Professionally Qualified'), ('SKILLED_TECH', 'Skilled Technical'), ('SEMI_SKILLED', 'Semi-Skilled'), ('UNSKILLED', 'Unskilled'), ('TOTAL_PERM', 'Total Permanent'), ('TEMP', 'Temporary')], max_length=20)),
                ('african_male', models.PositiveIntegerField(default=0)),
                ('coloured_male', models.PositiveIntegerField(default=0)),
                ('indian_male', models.PositiveIntegerField(default=0)),
                ('white_male', models.PositiveIntegerField(default=0)),
                ('foreign_male', models.PositiveIntegerField(default=0)),
                ('african_female', models.PositiveIntegerField(default=0)),
                ('coloured_female', models.PositiveIntegerField(default=0)),
                ('indian_female', models.PositiveIntegerField(default=0)),
                ('white_female', models.PositiveIntegerField(default=0)),
                ('foreign_female', models.PositiveIntegerField(default=0)),
                ('ee_report', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='workforce_profiles', to='corporate.eereport')),
            ],
            options={
                'verbose_name': 'EE Workforce Profile',
                'verbose_name_plural': 'EE Workforce Profiles',
                'ordering': ['occupational_level'],
                'unique_together': {('ee_report', 'occupational_level')},
            },
        ),
        migrations.AlterUniqueTogether(
            name='wspsubmission',
            unique_together={('client', 'wsp_year')},
        ),
        migrations.AlterUniqueTogether(
            name='atrsubmission',
            unique_together={('client', 'reporting_year')},
        ),
    ]
