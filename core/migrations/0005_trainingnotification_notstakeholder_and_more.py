# Generated by Django 5.2.8 on 2025-12-01 21:50

import django.db.models.deletion
from django.conf import settings
from django.db import migrations, models


class Migration(migrations.Migration):

    dependencies = [
        ('academics', '0002_initial'),
        ('core', '0004_fix_task_assigned_role'),
        ('corporate', '0001_initial'),
        ('logistics', '0001_initial'),
        ('tenants', '0001_initial'),
    ]

    operations = [
        migrations.CreateModel(
            name='TrainingNotification',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('is_deleted', models.BooleanField(default=False)),
                ('deleted_at', models.DateTimeField(blank=True, null=True)),
                ('reference_number', models.CharField(editable=False, max_length=50, unique=True)),
                ('title', models.CharField(max_length=255)),
                ('project_type', models.CharField(choices=[('TENDER', 'Tender/RFQ'), ('BURSARY', 'Bursary/Scholarship'), ('CORPORATE', 'Corporate Training'), ('LEARNERSHIPS', 'Learnerships'), ('SKILLS_PROGRAMME', 'Skills Programme'), ('APPRENTICESHIP', 'Apprenticeship'), ('PRIVATE', 'Private Students'), ('SHORT_COURSE', 'Short Course'), ('FULL_QUALIFICATION', 'Full Qualification'), ('RPL', 'Recognition of Prior Learning'), ('OTHER', 'Other')], max_length=30)),
                ('description', models.TextField(blank=True)),
                ('status', models.CharField(choices=[('DRAFT', 'Draft'), ('PLANNING', 'Planning Meeting Scheduled'), ('IN_MEETING', 'In Planning Meeting'), ('PENDING_APPROVAL', 'Pending Approval'), ('APPROVED', 'Approved'), ('NOTIFICATIONS_SENT', 'Notifications Sent'), ('IN_PROGRESS', 'In Progress'), ('COMPLETED', 'Completed'), ('CANCELLED', 'Cancelled'), ('ON_HOLD', 'On Hold')], default='DRAFT', max_length=30)),
                ('priority', models.CharField(choices=[('LOW', 'Low'), ('MEDIUM', 'Medium'), ('HIGH', 'High'), ('URGENT', 'Urgent')], default='MEDIUM', max_length=20)),
                ('client_name', models.CharField(blank=True, help_text='Corporate client, SETA, or funding body', max_length=255)),
                ('tender_reference', models.CharField(blank=True, help_text='Tender/RFQ reference number if applicable', max_length=100)),
                ('contract_value', models.DecimalField(blank=True, decimal_places=2, max_digits=14, null=True)),
                ('program_description', models.TextField(blank=True, help_text='Description of the training program/modules')),
                ('expected_learner_count', models.PositiveIntegerField(default=1)),
                ('learner_source', models.CharField(choices=[('NEW_RECRUITMENT', 'New Recruitment Required'), ('CLIENT_PROVIDED', 'Client Will Provide Learners'), ('EXISTING_PIPELINE', 'Existing Pipeline/Waitlist'), ('MIXED', 'Mixed Sources')], default='NEW_RECRUITMENT', max_length=50)),
                ('recruitment_notes', models.TextField(blank=True)),
                ('planned_start_date', models.DateField(blank=True, null=True)),
                ('planned_end_date', models.DateField(blank=True, null=True)),
                ('actual_start_date', models.DateField(blank=True, null=True)),
                ('actual_end_date', models.DateField(blank=True, null=True)),
                ('duration_months', models.PositiveIntegerField(blank=True, null=True)),
                ('delivery_mode', models.CharField(choices=[('ON_CAMPUS', 'On Campus'), ('OFF_SITE', 'Off-Site (Client Premises)'), ('ONLINE', 'Online/Virtual'), ('BLENDED', 'Blended Learning'), ('WORKPLACE', 'Workplace-Based')], default='ON_CAMPUS', max_length=30)),
                ('delivery_address', models.TextField(blank=True, help_text='Address if off-site delivery')),
                ('planning_meeting_date', models.DateTimeField(blank=True, null=True)),
                ('planning_meeting_venue', models.CharField(blank=True, max_length=255)),
                ('planning_meeting_notes', models.TextField(blank=True)),
                ('planning_meeting_completed', models.BooleanField(default=False)),
                ('approved_date', models.DateTimeField(blank=True, null=True)),
                ('approval_notes', models.TextField(blank=True)),
                ('notifications_sent_date', models.DateTimeField(blank=True, null=True)),
                ('approved_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='approved_training_notifications', to=settings.AUTH_USER_MODEL)),
                ('cohort', models.ForeignKey(blank=True, help_text='Link to created cohort once project starts', null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='training_notifications', to='logistics.cohort')),
                ('corporate_client', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='training_notifications', to='corporate.corporateclient')),
                ('created_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.PROTECT, related_name='%(class)s_created', to=settings.AUTH_USER_MODEL)),
                ('deleted_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='%(class)s_deleted', to=settings.AUTH_USER_MODEL)),
                ('delivery_campus', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='training_notifications', to='tenants.campus')),
                ('qualification', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='training_notifications', to='academics.qualification')),
                ('updated_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.PROTECT, related_name='%(class)s_updated', to=settings.AUTH_USER_MODEL)),
            ],
            options={
                'verbose_name': 'Notification of Training',
                'verbose_name_plural': 'Notifications of Training',
                'ordering': ['-created_at'],
                'permissions': [('can_approve_not', 'Can approve Notification of Training'), ('can_send_not_notifications', 'Can send NOT notifications')],
            },
        ),
        migrations.CreateModel(
            name='NOTStakeholder',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('is_deleted', models.BooleanField(default=False)),
                ('deleted_at', models.DateTimeField(blank=True, null=True)),
                ('department', models.CharField(choices=[('EXECUTIVE', 'Executive/Management'), ('ACADEMIC', 'Academic/Training'), ('FINANCE', 'Finance'), ('SALES', 'Sales/Business Development'), ('RECRUITMENT', 'Recruitment/Admissions'), ('LOGISTICS', 'Logistics/Operations'), ('HR', 'Human Resources'), ('QUALITY', 'Quality Assurance'), ('IT', 'IT/Systems'), ('MARKETING', 'Marketing'), ('COMPLIANCE', 'Compliance/SDF'), ('EXTERNAL', 'External Stakeholder')], max_length=30)),
                ('role_in_project', models.CharField(choices=[('PROJECT_LEAD', 'Project Lead'), ('PROJECT_MANAGER', 'Project Manager'), ('FACILITATOR', 'Facilitator'), ('ASSESSOR', 'Assessor'), ('MODERATOR', 'Moderator'), ('RECRUITER', 'Recruiter'), ('FINANCE_LEAD', 'Finance Lead'), ('COMPLIANCE_LEAD', 'Compliance/SDF Lead'), ('LOGISTICS_LEAD', 'Logistics Coordinator'), ('QUALITY_LEAD', 'Quality Assurance Lead'), ('CLIENT_LIAISON', 'Client Liaison'), ('OBSERVER', 'Observer/Informed'), ('SUPPORT', 'Support Staff')], max_length=30)),
                ('responsibilities', models.TextField(blank=True, help_text='Specific responsibilities for this project')),
                ('invited_to_meeting', models.BooleanField(default=True)),
                ('attended_meeting', models.BooleanField(default=False)),
                ('meeting_notes', models.TextField(blank=True)),
                ('notification_sent', models.BooleanField(default=False)),
                ('notification_sent_date', models.DateTimeField(blank=True, null=True)),
                ('notification_acknowledged', models.BooleanField(default=False)),
                ('notification_acknowledged_date', models.DateTimeField(blank=True, null=True)),
                ('tasks_assigned', models.TextField(blank=True, help_text='Specific tasks assigned during planning')),
                ('tasks_completed', models.BooleanField(default=False)),
                ('created_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.PROTECT, related_name='%(class)s_created', to=settings.AUTH_USER_MODEL)),
                ('deleted_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='%(class)s_deleted', to=settings.AUTH_USER_MODEL)),
                ('updated_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.PROTECT, related_name='%(class)s_updated', to=settings.AUTH_USER_MODEL)),
                ('user', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='not_assignments', to=settings.AUTH_USER_MODEL)),
                ('training_notification', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='stakeholders', to='core.trainingnotification')),
            ],
            options={
                'verbose_name': 'NOT Stakeholder',
                'verbose_name_plural': 'NOT Stakeholders',
                'ordering': ['department', 'role_in_project'],
                'unique_together': {('training_notification', 'user', 'role_in_project')},
            },
        ),
        migrations.CreateModel(
            name='NOTResourceRequirement',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('is_deleted', models.BooleanField(default=False)),
                ('deleted_at', models.DateTimeField(blank=True, null=True)),
                ('resource_type', models.CharField(choices=[('FACILITATOR', 'Facilitator'), ('ASSESSOR', 'Assessor'), ('MODERATOR', 'Moderator'), ('VENUE', 'Venue/Classroom'), ('EQUIPMENT', 'Equipment'), ('MATERIALS', 'Learning Materials'), ('PPE', 'PPE/Safety Equipment'), ('SOFTWARE', 'Software/Licenses'), ('TRANSPORT', 'Transport'), ('ACCOMMODATION', 'Accommodation'), ('CATERING', 'Catering'), ('OTHER', 'Other')], max_length=30)),
                ('description', models.CharField(max_length=255)),
                ('quantity_required', models.PositiveIntegerField(default=1)),
                ('quantity_available', models.PositiveIntegerField(default=0)),
                ('is_available', models.BooleanField(default=False)),
                ('status', models.CharField(choices=[('REQUIRED', 'Required'), ('SOURCING', 'Sourcing/Procurement'), ('ORDERED', 'Ordered'), ('AVAILABLE', 'Available'), ('ALLOCATED', 'Allocated to Project'), ('NOT_AVAILABLE', 'Not Available')], default='REQUIRED', max_length=30)),
                ('estimated_cost', models.DecimalField(blank=True, decimal_places=2, max_digits=12, null=True)),
                ('actual_cost', models.DecimalField(blank=True, decimal_places=2, max_digits=12, null=True)),
                ('supplier', models.CharField(blank=True, max_length=255)),
                ('procurement_notes', models.TextField(blank=True)),
                ('expected_availability_date', models.DateField(blank=True, null=True)),
                ('manager_notified', models.BooleanField(default=False)),
                ('manager_notified_date', models.DateTimeField(blank=True, null=True)),
                ('assigned_user', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='not_resource_assignments', to=settings.AUTH_USER_MODEL)),
                ('created_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.PROTECT, related_name='%(class)s_created', to=settings.AUTH_USER_MODEL)),
                ('deleted_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='%(class)s_deleted', to=settings.AUTH_USER_MODEL)),
                ('updated_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.PROTECT, related_name='%(class)s_updated', to=settings.AUTH_USER_MODEL)),
                ('training_notification', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='resource_requirements', to='core.trainingnotification')),
            ],
            options={
                'verbose_name': 'NOT Resource Requirement',
                'verbose_name_plural': 'NOT Resource Requirements',
                'ordering': ['resource_type', 'description'],
            },
        ),
        migrations.CreateModel(
            name='NOTNotificationLog',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('notification_type', models.CharField(choices=[('ASSIGNMENT', 'Role Assignment'), ('MEETING_INVITE', 'Meeting Invitation'), ('REMINDER', 'Reminder'), ('RESOURCE_SHORTAGE', 'Resource Shortage Alert'), ('DELIVERABLE_DUE', 'Deliverable Due'), ('STATUS_CHANGE', 'Status Change'), ('APPROVAL_REQUEST', 'Approval Request'), ('APPROVAL_GRANTED', 'Approval Granted'), ('PROJECT_START', 'Project Start'), ('GENERAL', 'General Notification')], max_length=30)),
                ('subject', models.CharField(max_length=255)),
                ('message', models.TextField()),
                ('sent_at', models.DateTimeField(auto_now_add=True)),
                ('sent_via', models.CharField(choices=[('EMAIL', 'Email'), ('SMS', 'SMS'), ('IN_APP', 'In-App Notification'), ('ALL', 'All Channels')], default='EMAIL', max_length=20)),
                ('delivered', models.BooleanField(default=False)),
                ('read', models.BooleanField(default=False)),
                ('read_at', models.DateTimeField(blank=True, null=True)),
                ('recipient', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='not_notifications_received', to=settings.AUTH_USER_MODEL)),
                ('training_notification', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='notification_logs', to='core.trainingnotification')),
            ],
            options={
                'verbose_name': 'NOT Notification Log',
                'verbose_name_plural': 'NOT Notification Logs',
                'ordering': ['-sent_at'],
            },
        ),
        migrations.CreateModel(
            name='NOTMeetingMinutes',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('is_deleted', models.BooleanField(default=False)),
                ('deleted_at', models.DateTimeField(blank=True, null=True)),
                ('meeting_date', models.DateTimeField()),
                ('meeting_type', models.CharField(choices=[('PLANNING', 'Initial Planning Meeting'), ('PROGRESS', 'Progress Review'), ('STAKEHOLDER', 'Stakeholder Meeting'), ('PROBLEM_SOLVING', 'Problem Solving'), ('CLOSEOUT', 'Project Closeout')], default='PLANNING', max_length=30)),
                ('agenda', models.TextField(blank=True)),
                ('minutes', models.TextField(blank=True)),
                ('decisions', models.TextField(blank=True, help_text='Key decisions made')),
                ('action_items', models.TextField(blank=True, help_text='Action items with owners')),
                ('next_meeting_date', models.DateTimeField(blank=True, null=True)),
                ('attendees', models.ManyToManyField(related_name='not_meetings_attended', to=settings.AUTH_USER_MODEL)),
                ('created_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.PROTECT, related_name='%(class)s_created', to=settings.AUTH_USER_MODEL)),
                ('deleted_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='%(class)s_deleted', to=settings.AUTH_USER_MODEL)),
                ('updated_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.PROTECT, related_name='%(class)s_updated', to=settings.AUTH_USER_MODEL)),
                ('training_notification', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='meeting_minutes', to='core.trainingnotification')),
            ],
            options={
                'verbose_name': 'NOT Meeting Minutes',
                'verbose_name_plural': 'NOT Meeting Minutes',
                'ordering': ['-meeting_date'],
            },
        ),
        migrations.CreateModel(
            name='NOTDeliverable',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('is_deleted', models.BooleanField(default=False)),
                ('deleted_at', models.DateTimeField(blank=True, null=True)),
                ('title', models.CharField(max_length=255)),
                ('deliverable_type', models.CharField(choices=[('REPORT', 'Report'), ('MILESTONE', 'Milestone'), ('REGISTRATION', 'Registration/Enrollment'), ('ASSESSMENT', 'Assessment Event'), ('MODERATION', 'Moderation'), ('CERTIFICATION', 'Certification'), ('AUDIT', 'Audit/Verification'), ('PAYMENT', 'Payment Milestone'), ('SUBMISSION', 'Document Submission'), ('MEETING', 'Progress Meeting'), ('OTHER', 'Other')], max_length=30)),
                ('description', models.TextField(blank=True)),
                ('responsible_department', models.CharField(blank=True, choices=[('EXECUTIVE', 'Executive/Management'), ('ACADEMIC', 'Academic/Training'), ('FINANCE', 'Finance'), ('SALES', 'Sales/Business Development'), ('RECRUITMENT', 'Recruitment/Admissions'), ('LOGISTICS', 'Logistics/Operations'), ('HR', 'Human Resources'), ('QUALITY', 'Quality Assurance'), ('IT', 'IT/Systems'), ('MARKETING', 'Marketing'), ('COMPLIANCE', 'Compliance/SDF'), ('EXTERNAL', 'External Stakeholder')], max_length=30)),
                ('due_date', models.DateField()),
                ('reminder_date', models.DateField(blank=True, null=True)),
                ('completed_date', models.DateField(blank=True, null=True)),
                ('status', models.CharField(choices=[('PENDING', 'Pending'), ('IN_PROGRESS', 'In Progress'), ('SUBMITTED', 'Submitted'), ('APPROVED', 'Approved'), ('REJECTED', 'Rejected'), ('COMPLETED', 'Completed'), ('OVERDUE', 'Overdue')], default='PENDING', max_length=30)),
                ('notes', models.TextField(blank=True)),
                ('attachments', models.FileField(blank=True, null=True, upload_to='not_deliverables/')),
                ('submit_to', models.CharField(blank=True, help_text='Who/where to submit (e.g., SETA, Client)', max_length=255)),
                ('external_reference', models.CharField(blank=True, max_length=100)),
                ('created_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.PROTECT, related_name='%(class)s_created', to=settings.AUTH_USER_MODEL)),
                ('deleted_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='%(class)s_deleted', to=settings.AUTH_USER_MODEL)),
                ('updated_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.PROTECT, related_name='%(class)s_updated', to=settings.AUTH_USER_MODEL)),
                ('responsible_stakeholder', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='deliverables', to='core.notstakeholder')),
                ('training_notification', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='deliverables', to='core.trainingnotification')),
            ],
            options={
                'verbose_name': 'NOT Deliverable',
                'verbose_name_plural': 'NOT Deliverables',
                'ordering': ['due_date', 'title'],
            },
        ),
    ]
